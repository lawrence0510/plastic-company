<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>榮紹精密塑膠射出成型工廠</title>
  <link rel="stylesheet" type="text/css" href="css/3-2.css">

</head>

<body>
  <div class="top_bar"><!-- 上半部 -->
    <img src="image/logo.jpg" alt="Logo" class="logo">
    <div class="company_name">榮紹精密塑膠射出成型工廠</div>

    <div class="search-container">
      <input type="text" class="search-box" id="searchInput" placeholder="Search...">
      <div onclick="searchFunction()">
        <img src="image/seac.png" alt="搜索按钮" class="search-button">
      </div>
    </div>

  </div>

  <div class="left_bar"><!-- 左半部選單 -->
    <div class="op_manage">
      <img src="image/manage.png" alt="Manage" class="manage-pic">
      作業管理
      <br><input type="button" value="庫存管理" name="按鈕名稱" onclick='location.href=("庫存管理.html")'>
      <br><input type="button" value="原物料管理" name="按鈕名稱" onclick='location.href=("原物料管理.html")'>
      <br><input type="button" value="訂單進度" name="按鈕名稱" onclick='location.href=("訂單進度.html")'>
      <br><input type="button" value="新增訂單" name="按鈕名稱" onclick='location.href=("新增訂單.html")'>
    </div>

    <div class="cus_manage">
      <img src="image/cus.png" alt="Cus" class="cus-pic">
      顧客關係管理
      <br><input type="button" value="銷售分析" name="按鈕名稱" onclick='location.href=("銷售分析.html")'>
      <br><input type="button" value="顧客分析" name="按鈕名稱" onclick='location.href=("顧客分析.html")'>
      <br><input type="button" value="銷售資料查詢" name="按鈕名稱" onclick='location.href=("銷售資料查詢.html")'>
      <br><input type="button" value="顧客資料查詢" name="按鈕名稱" onclick='location.href=("顧客資料查詢.html")'>
    </div>
  </div>

  <div class="title1-1">查看訂單詳情</div>
  <div class="order0">
    <div>訂單編號：</div>
    <div class="order1-1" id="ordernumber">123</div>
    <div class="order2">訂單進度：</div>
    <div class="order2-1" id="progress">123</div>
    <div class="order3">訂單內容：</div>
  </div>

  <div class="item_name">商品名稱
    <span class="item_num"> 數量</span>
  </div>
  <div class="item_content">
    <div class="item_content_name" id="itemname"></div>
    <div class="item_content_num" id="itemnumber"></div>
    <div class="vertical-line-in"></div>
  </div>

  <div class="item_content_r">
    <div class="item_content_r_1" id="itemname1"></div>
    <div class="item_container"> <!--框架-->
      <div class="item_column"> <!--左邊直排-->
        <div class="item_box">
          <div class="item_topic" id="material1">材料1</div>
          <div class="item_num">收回代碼：</div>
          <div class="item_num_content" id="material1id">id1</div>
          <div class="item_inv">庫存量：</div>
          <div class="item_inv_content" id="material1quantity">材料1數量</div>
        </div>
      </div>
      <div class="item_column"> <!--右邊直排-->
        <div class="item_box">
          <div class="item_topic" id="material2">材料2</div>
          <div class="item_num">收回代碼：</div>
          <div class="item_num_content" id="material1id">id2</div>
          <div class="item_inv">庫存量：</div>
          <div class="item_inv_content" id="material1quantity">材料2數量</div>
        </div>
      </div>
    </div>
  </div>





  <script>
    document.addEventListener('DOMContentLoaded', function() {
    const orderId = getOrderIdFromUrl();
    fetch('http://localhost:8080/api/productOrder')
        .then(response => response.json())
        .then(data => {
            const order = data.find(order => order.id === parseInt(orderId));
            if (order) {
                updateOrderDetails(order);
            }
        })
        .catch(error => console.error('Error:', error));
});

function getOrderIdFromUrl() {
    const queryParams = new URLSearchParams(window.location.search);
    return queryParams.get('orderId');
}

function updateOrderDetails(order) {
    document.getElementById('ordernumber').textContent = order.id;
    document.getElementById('progress').textContent = (order.progress * 100) + '%';
    document.getElementById('itemname').textContent = order.product.name;
    document.getElementById('itemname1').textContent = order.product.name;
    document.getElementById('itemnumber').textContent = order.quantity;
}


  </script>


</body>

</html>